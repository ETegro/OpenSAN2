<%#
LuCI - Lua Configuration Interface
Copyright 2010 Jo-Philipp Wich <xm@subsignal.org>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

$Id: bandwidth.htm 6583 2010-11-28 18:01:07Z jow $

-%>

<%-
  local ntm = require "luci.model.network".init()

  local dev
  local devices = { }
  for _, dev in luci.util.vspairs(luci.sys.net.devices()) do
      if dev ~= "lo" and not ntm:ignore_interface(dev) then
          devices[#devices+1] = dev
      end
  end

  local curdev = luci.dispatcher.context.requestpath
        curdev = curdev[#curdev] ~= "bandwidth" and curdev[#curdev] or devices[1]
-%>

<%+header%>

<h2><a id="content" name="content"><%:Plots%></a></h2>

<center>
<% num = cpunum:pcdata()/countproc:pcdata() %>
    <% for i=1,countproc:pcdata() do %>
        Cpu-<%= i %> 
        <br />
        <% startvalue = num*(i-1) %>

            <% for j=startvalue+1,startvalue+num do %>
            <img style="width:500px; height:300px; border:1px solid #000000; background-color:#FFFFFF"  src="<%=resource%>/cpu<%=j%>.png" />
            <% end %>

        <br />
    <% end %>


<img style="width:500px; height:300px; border:1px solid #000000; background-color:#FFFFFF"   src="<%=resource%>/memory.png" />
<img style="width:500px; height:300px; border:1px solid #000000; background-color:#FFFFFF"   src="<%=resource%>/network.png" />
</center>
<br />
<div style="text-align:right"><small id="scale">-</small></div>
<br />

<%+footer%>
